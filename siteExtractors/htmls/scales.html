<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags --><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>D3 Scale functions | D3 in Depth</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="D3 Scale functions" />
<meta name="author" content="Peter Cook" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="How to use D3 scale functions to transform data values into visual values such as positions and colours. This article covers linear scales (scaleLinear), square root scales (scaleSqrt), log scales (scaleLog), sequential scales (scaleSequential), quantized scales (scaleQuantize), quantile scales (scaleQuantile), threshold scales (scaleThreshold), ordinal scales (scaleOrdinal) and band scales (scaleBand). We also cover scale clamping, nice and inversion." />
<meta property="og:description" content="How to use D3 scale functions to transform data values into visual values such as positions and colours. This article covers linear scales (scaleLinear), square root scales (scaleSqrt), log scales (scaleLog), sequential scales (scaleSequential), quantized scales (scaleQuantize), quantile scales (scaleQuantile), threshold scales (scaleThreshold), ordinal scales (scaleOrdinal) and band scales (scaleBand). We also cover scale clamping, nice and inversion." />
<link rel="canonical" href="https://www.d3indepth.com/scales/" />
<meta property="og:url" content="https://www.d3indepth.com/scales/" />
<meta property="og:site_name" content="D3 in Depth" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-05-12T00:00:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="D3 Scale functions" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Peter Cook","url":"https://peterrcook.com"},"dateModified":"2021-05-12T00:00:00+01:00","datePublished":"2021-05-12T00:00:00+01:00","description":"How to use D3 scale functions to transform data values into visual values such as positions and colours. This article covers linear scales (scaleLinear), square root scales (scaleSqrt), log scales (scaleLog), sequential scales (scaleSequential), quantized scales (scaleQuantize), quantile scales (scaleQuantile), threshold scales (scaleThreshold), ordinal scales (scaleOrdinal) and band scales (scaleBand). We also cover scale clamping, nice and inversion.","headline":"D3 Scale functions","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.d3indepth.com/scales/"},"url":"https://www.d3indepth.com/scales/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css"/>
  <link href="/css/main.css" rel="stylesheet">
  <link rel="shortcut icon" type="image/jpg" href="/img/favicon.png"/><link type="application/atom+xml" rel="alternate" href="https://www.d3indepth.com/feed.xml" title="D3 in Depth" /><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57362118-2', 'auto');
  ga('send', 'pageview');

</script></head>



  <body class="sans-serif ">

    <div class="mw9 center">
      <header class="flex items-center justify-between pv3 ph3 center">
  <div class="flex items-end" style="flex-shrink: 0;">
	<div class="f4 f3-m f2-ns fw7 tracked-tight"><a style="font-family: 'Lora', serif;" class="link" href="/">D3 in Depth</a></div>
  </div>
  <p class="black-50 f6 b ph3 tc" style="flex-shrink: 1;">D3 in Depth covers <span class="black-80">versions 6 and 7</span> of D3</p>
  
  <div style="flex-shrink: 0;">
    <a class="link black-70 f6 fw6 mr3 " href="/">Home</a>
    <a class="link black-70 f6 fw6 mr3 " href="/about">About</a>
    <a class="link black-70 f6 fw6 " href="/newsletter">Newsletter</a>
  </div>
</header>


      <section class="content flex flex-column flex-row-l bt b--black-10 mb4">
        <section class="sidebar w-100 w-20-l mt4 order-3-l">
          <div class="f6 fw4 tc mb0 black-50">MY BOOKS</div>

<div class="flex flex-row flex-column-l">
  <div class="book pv3 ph4 w-90 mw5 flex flex-column center black-70">
  <a class="center link" href="https://www.createwithdata.com/d3-start-to-finish-book/"><img src="/img/d3-start-to-finish.png" class="shadow-5"></a>
  <p class="mb0"><i>"One of the best D3 books I've read. The contents are very clear, it is easy to follow and the concepts are very solid."</i></p>
  <p class="mt0 tr"><a href="https://jgf92.github.io/personal-page/">Javier García Fernández</a></p>
  <p>Learn how to make a custom data visualisation using D3.js.</p>
  <a href="https://www.createwithdata.com/d3-start-to-finish-book/" class="f5 no-underline black bg-animate hover-bg-black hover-white inline-flex items-center pa2 ba border-box">
    <span class="center">Find out more</span>
  </a>
</div>    

<div class="book pv3 ph4 w-90 mw5 flex flex-column center black-70">
  <a class="center link" href="https://leanpub.com/html-svg-css-js-for-data-visualisation"><img src="/img/fundamentals.jpg" class="shadow-5"></a>
  <p>Learn the fundamentals of HTML, SVG, CSS and JavaScript for building data visualisations on the web.</p>
  <a href="https://leanpub.com/html-svg-css-js-for-data-visualisation" class="f5 no-underline black bg-animate hover-bg-black hover-white inline-flex items-center pa2 ba border-box">
    <span class="center">Find out more</span>
  </a>
</div>

</div>

        </section>

        <section class="w-100 w-20-l order-1-l">
          <nav class="ph3 ph5-l pv4">
  <div class="f6 fw4 mb3 black-50 tc tr-l">CONTENTS</div>
  <div class="flex flex-column flex-start db-l tc tr-l">
    <div class="published mb2"><a class="link black-70 f6 fw6 " href="/introduction">Introduction to D3</a></div>
    <div class="published mb2"><a class="link black-70 f6 fw6 " href="/gettingstarted">Getting Started</a></div>
    <div class="published mb2"><a class="link black-70 f6 fw6 " href="/selections">Selections</a></div>
    <div class="published mb2"><a class="link black-70 f6 fw6 " href="/datajoins">Data joins</a></div>
    <div class="published mb2"><a class="link black-70 f6 fw6 " href="/enterexit">Enter, exit & update</a></div>
    <div class="published mb2"><a class="link black-70 f6 fw6 underline" href="/scales">Scale functions</a></div>
    <div class="published mb2"><a class="link black-70 f6 fw6 " href="/shapes">Shapes</a></div>
    <div class="published mb2"><a class="link black-70 f6 fw6 " href="/axes">Axes</a></div>
    <div class="published mb2"><a class="link black-70 f6 fw6 " href="/hierarchies">Hierarchies</a></div>
    <div class="published mb2"><a class="link black-70 f6 fw6 " href="/chords">Chord Diagrams</a></div>
    <div class="published mb2"><a class="link black-70 f6 fw6 " href="/force-layout">Force layout</a></div>
    <div class="published mb2"><a class="link black-70 f6 fw6 " href="/geographic">Maps</a></div>
    <div class="mb2"><a class="link black-70 f6 fw6 " href="/requests">Data Requests</a></div>
    <div class="mb2"><a class="link black-70 f6 fw6 " href="/transitions">Transitions</a></div>
    <div class="mb2"><a class="link black-70 f6 fw6 " href="/interaction">Picking, Dragging and Brushing</a></div>
    <div class="mb2"><a class="link black-70 f6 fw6 " href="/zoom-and-pan">Zoom & pan</a></div>
  </div>
</nav>

          <div class="f6 fw4 tc black-50 mt3 mb3">NEWSLETTER</div>
          <div class="mw5 center w-90 f5 l-copy ph4 mb4 black-70">
            <p>Get <span class="b">book discounts</span> and receive D3.js related news and tips.</p>
            <a href="/newsletter" class="w-100 tc f5 no-underline black bg-animate hover-bg-black hover-white inline-flex items-center pa2 ba border-box">
              <span class="center">Subscribe</span>
            </a>
          </div>
        </section>
        
        <section class="w-100 w-60-l ph3 order-2-l">
          <div class="black-70">
  <h1 class="f4 fw6 f2-ns lh-title">D3 Scale functions</h2>

  <div class="page-content">
  	<p><em>How to use D3 scale functions to transform data values into visual values such as positions and colours. After explaning scale basics we cover linear, square root, log, sequential, quantized, quantile, threshold, ordinal, band and point scales.</em></p>

<p>Scale functions are JavaScript functions that:</p>

<ul>
  <li>take an input (usually a number, date or category) and</li>
  <li>return a value (such as a coordinate, a colour, a length or a radius)</li>
</ul>

<p>They’re typically used to transform (or ‘map’) data values into visual variables (such as position, length and colour).</p>

<p>For example, suppose you have some data:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">7.5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span> <span class="p">]</span></code></pre></figure>

<p>you can create a scale function using:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">myScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">600</span><span class="p">]);</span></code></pre></figure>

<p>D3 creates a function <code class="language-plaintext highlighter-rouge">myScale</code> which accepts input between 0 and 10 (the <strong>domain</strong>) and maps it to output between 0 and 600 (the <strong>range</strong>).</p>

<p>You can use <code class="language-plaintext highlighter-rouge">myScale</code> to calculate positions based on the data:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">myScale</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>   <span class="c1">// returns 0</span>
<span class="nx">myScale</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>   <span class="c1">// returns 120</span>
<span class="nx">myScale</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>   <span class="c1">// returns 180</span>
<span class="p">...</span>
<span class="nx">myScale</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>  <span class="c1">// returns 600</span></code></pre></figure>

<!-- <iframe class="db center" src="/blocks/scales/example/" marginwidth="0" marginheight="0" style="width: 100%; height: 50px;" scrolling="yes"></iframe> -->

<iframe class="db center" src="/examples-merged/scales/example/" marginwidth="0" marginheight="0" style="width: 100%; height: 50px;" scrolling="yes"></iframe>

<div class="flex justify-end f6 mt1 mb4">
  <form action="https://codepen.io/pen/define" method="POST" target="_blank"><input type="hidden" name="data" value="{&quot;title&quot;:&quot;D3 in Depth&quot;,&quot;js_external&quot;:&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js&quot;,&quot;html&quot;:&quot;&lt;svg width=\&quot;700\&quot; height=\&quot;40\&quot;&gt;\n  &lt;g class=\&quot;inner\&quot; transform=\&quot;translate(40, 30)\&quot;&gt;\n  &lt;/g&gt;\n&lt;/svg&gt;\n&quot;,&quot;css&quot;:&quot;body {\n  font-family: \&quot;Helvetica Neue\&quot;, Helvetica, sans-serif;\n  font-size: 12px;\n  color: #333;\n}\ntext {\n\tfill: #555;\n}\n.inner text {\n\ttext-anchor: middle;\n}\n&quot;,&quot;js&quot;:&quot;var data = [ 0, 2, 3, 5, 7.5, 9, 10 ];\n\nvar myScale = d3.scaleLinear()\n\t.domain([0, 10])\n\t.range([0, 600]);\n\nd3.select(&apos;svg .inner&apos;)\n\t.selectAll(&apos;circle&apos;)\n\t.data(data)\n\t.join(&apos;circle&apos;)\n\t.attr(&apos;r&apos;, 3)\n\t.attr(&apos;cx&apos;, function(d) {\n\t\treturn myScale(d);\n\t});\n\nd3.select(&apos;svg .inner&apos;)\n\t.selectAll(&apos;text&apos;)\n\t.data(data)\t\n\t.join(&apos;text&apos;)\n\t.attr(&apos;x&apos;, function(d) {\n\t\treturn myScale(d);\n\t})\n\t.attr(&apos;y&apos;, -8)\n\t.text(function(d) {\n\t\treturn d;\n\t});\n&quot;}" /><input type="submit" value="Edit in CodePen" /></form>
</div>

<div>
<!-- <div class="example-links tr f8 blue mt2 mb4"> -->
	<!-- <a class="f7 black-50" href="https://bl.ocks.org/d3indepth/2d51279bdad4a553b2005af680108257" target="_blank">View source</a> -->
	<!-- | <a href="https://gist.jsbin.com/d3indepth/2d51279bdad4a553b2005af680108257?html,output" target="_blank">Edit in JS Bin</a> -->
	<!-- | <a class="f7 black-50" href="https://gist.run/?id=2d51279bdad4a553b2005af680108257" target="_blank">Edit in GistRun</a> -->
<!-- </div> -->
</div>

<p>Scales are mainly used for transforming data values to visual variables such as position, length and colour.</p>

<p>For example they can transform:</p>

<ul>
  <li>data values into lengths between 0 and 500 for a bar chart</li>
  <li>data values into positions between 0 and 200 for line charts</li>
  <li>% change data (+4%, +10%, -5% etc.) into a continuous range of colours (with red for negative and green for positive)</li>
  <li>dates into positions along an x-axis.</li>
</ul>

<h3 id="constructing-scales">Constructing scales</h3>

<p>(In this chapter we’ll just focus on linear scales as these are the most commonly used scale type. We’ll cover other types later on.)</p>

<p>To create a linear scale you use:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">myScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">();</span></code></pre></figure>

<blockquote>Versions 4 and above use a different naming convention to v3. `d3.scaleLinear()` is used in v4 and above and `d3.scale.linear()` is used in v3.</blockquote>

<p>As it stands the above function isn’t very useful so you can configure the input bounds (the <strong>domain</strong>) as well as the output bounds (the <strong>range</strong>):</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">myScale</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">800</span><span class="p">]);</span></code></pre></figure>

<p>This results in a scale function that accepts input between 0 and 100 and linearly maps it to between 0 and 800:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">myScale</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>    <span class="c1">// returns 0</span>
<span class="nx">myScale</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>   <span class="c1">// returns 400</span>
<span class="nx">myScale</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>  <span class="c1">// returns 800</span></code></pre></figure>

<blockquote>Try experimenting with scale functions by copying code fragments and pasting them into the <a href="https://developers.google.com/web/tools/chrome-devtools/console/">console</a> of this page. (I've included D3 version 6.2.0 on every page of D3 in Depth.)</blockquote>

<h3 id="d3-scale-types">D3 scale types</h3>

<p>D3 has around 12 different scale types (scaleLinear, scalePow, scaleQuantise, scaleOrdinal etc.) and broadly speaking they can be classified into 3 groups:</p>

<ul>
  <li><a href="#scales-with-continuous-input-and-continuous-output">scales with continuous input and continuous output</a></li>
  <li><a href="#scales-with-continuous-input-and-discrete-output">scales with continuous input and discrete output</a></li>
  <li><a href="#scales-with-discrete-input-and-discrete-output">scales with discrete input and discrete output</a></li>
</ul>

<blockquote>
  <p>Continuous data is typically numeric data but also includes time and dates. Discrete data has a set number of values (such as the twelve months of the year).)</p>
</blockquote>

<p>We’ll now look at each of these three categories.</p>

<h3 id="scales-with-continuous-input-and-continuous-output">Scales with continuous input and continuous output</h3>

<p>In this chapter we cover scale functions that map from a <strong>continuous input domain</strong> to a <strong>continuous output range</strong>.</p>

<h4 id="scalelinear">scaleLinear</h4>

<p>Linear scales are probably the most commonly used scale type as they are the most suitable scale for transforming data values into positions and lengths.</p>

<p>They use a linear function <var>y=mx+c</var> to interpolate across the domain and range. (Imagine a graph where the domain is on the x-axis and the range is on the y-axis.)</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">linearScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">600</span><span class="p">]);</span>

<span class="nx">linearScale</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>   <span class="c1">// returns 0</span>
<span class="nx">linearScale</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>   <span class="c1">// returns 300</span>
<span class="nx">linearScale</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>  <span class="c1">// returns 600</span></code></pre></figure>

<p>Linear scale functions are typically used to transform data values into positions and lengths. They are useful when creating bar charts, line charts and many other chart types.</p>

<p>The output range can also be specified as colours:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">linearScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="dl">'</span><span class="s1">yellow</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">red</span><span class="dl">'</span><span class="p">]);</span>

<span class="nx">linearScale</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>   <span class="c1">// returns "rgb(255, 255, 0)"</span>
<span class="nx">linearScale</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>   <span class="c1">// returns "rgb(255, 128, 0)"</span>
<span class="nx">linearScale</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>  <span class="c1">// returns "rgb(255, 0, 0)"</span></code></pre></figure>

<p>This can be useful for visualisations such as choropleth maps, but also consider <code class="language-plaintext highlighter-rouge">scaleQuantize</code>, <code class="language-plaintext highlighter-rouge">scaleQuantile</code> and <code class="language-plaintext highlighter-rouge">scaleThreshold</code>.</p>

<h4 id="scalesqrt">scaleSqrt</h4>

<p>The <code class="language-plaintext highlighter-rouge">scaleSqrt</code> scale is useful for sizing circles by area (rather than radius). (When using circle size to represent data, it’s considered better practice to <a href="https://eagereyes.org/blog/2008/linear-vs-quadratic-change">set the area, rather than the radius</a> proportionally to the data.)</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">sqrtScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleSqrt</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">]);</span>

<span class="nx">sqrtScale</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>   <span class="c1">// returns 0</span>
<span class="nx">sqrtScale</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>  <span class="c1">// returns 21.21...</span>
<span class="nx">sqrtScale</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span> <span class="c1">// returns 30</span></code></pre></figure>

<!-- <iframe class="db center" src="/blocks/scales/sqrt/" marginwidth="0" marginheight="0" style="width: 100%; height: 90px;" scrolling="yes"></iframe> -->

<iframe class="db center" src="/examples-merged/scales/sqrt/" marginwidth="0" marginheight="0" style="width: 100%; height: 90px;" scrolling="yes"></iframe>

<div class="flex justify-end f6 mt1 mb4">
  <form action="https://codepen.io/pen/define" method="POST" target="_blank"><input type="hidden" name="data" value="{&quot;title&quot;:&quot;D3 in Depth&quot;,&quot;js_external&quot;:&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js&quot;,&quot;html&quot;:&quot;&lt;svg width=\&quot;800\&quot; height=\&quot;80\&quot;&gt;\n  &lt;g id=\&quot;wrapper\&quot; transform=\&quot;translate(40, 40)\&quot;&gt;\n  &lt;/g&gt;\n&lt;/svg&gt;\n&quot;,&quot;css&quot;:&quot;\nbody {\n  font-family: \&quot;Helvetica Neue\&quot;, Helvetica, sans-serif;\n  font-size: 14px;\n  color: #333;\n}\ncircle {\n\tfill: #888;\n}\n&quot;,&quot;js&quot;:&quot;var linearScale = d3.scaleLinear()\n\t.domain([0, 100])\n\t.range([0, 700]);\n\nvar sqrtScale = d3.scaleSqrt()\n\t.domain([0, 100])\n\t.range([0, 30]);\n\nvar myData = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100];\n\nd3.select(&apos;#wrapper&apos;)\n\t.selectAll(&apos;circle&apos;)\n\t.data(myData)\n\t.join(&apos;circle&apos;)\n\t.attr(&apos;r&apos;, function(d) {\n\t\treturn sqrtScale(d);\n\t})\n\t.attr(&apos;cx&apos;, function(d) {\n\t\treturn linearScale(d);\n\t});\n\n  \n&quot;}" /><input type="submit" value="Edit in CodePen" /></form>
</div>

<div>
<!-- <div class="example-links tr f8 blue mt2 mb4"> -->
	<!-- <a class="f7 black-50" href="https://bl.ocks.org/d3indepth/775cf431e64b6718481c06fc45dc34f9" target="_blank">View source</a> -->
	<!-- | <a href="https://gist.jsbin.com/d3indepth/775cf431e64b6718481c06fc45dc34f9?html,output" target="_blank">Edit in JS Bin</a> -->
	<!-- | <a class="f7 black-50" href="https://gist.run/?id=775cf431e64b6718481c06fc45dc34f9" target="_blank">Edit in GistRun</a> -->
<!-- </div> -->
</div>

<h4 id="scalepow">scalePow</h4>

<p><code class="language-plaintext highlighter-rouge">scalePow</code> is a more general version of <code class="language-plaintext highlighter-rouge">scaleSqrt</code>. This scale interpolates using a power function <var>y=mx<sup>k</sup>+c</var>. The exponent <code class="language-plaintext highlighter-rouge">k</code> is set using <code class="language-plaintext highlighter-rouge">.exponent()</code>:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">powerScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scalePow</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">exponent</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">]);</span>

<span class="nx">powerScale</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>   <span class="c1">// returns 0</span>
<span class="nx">powerScale</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>  <span class="c1">// returns 21.21...</span>
<span class="nx">powerScale</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span> <span class="c1">// returns 30</span></code></pre></figure>

<p>(I’ve never used this scale, by the way!)</p>

<h4 id="scalelog">scaleLog</h4>

<p><code class="language-plaintext highlighter-rouge">scaleLog</code> interpolates using a log function <var>y=m*log(x)+b</var> and can be useful when the data has an exponential nature to it.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">logScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLog</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100000</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">600</span><span class="p">]);</span>

<span class="nx">logScale</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>     <span class="c1">// returns 0</span>
<span class="nx">logScale</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>    <span class="c1">// returns 150</span>
<span class="nx">logScale</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>   <span class="c1">// returns 300</span>
<span class="nx">logScale</span><span class="p">(</span><span class="mi">100000</span><span class="p">);</span> <span class="c1">// returns 600</span></code></pre></figure>

<!-- <iframe class="db center" src="/blocks/scales/log/" marginwidth="0" marginheight="0" style="width: 100%; height: 90px;" scrolling="yes"></iframe> -->

<iframe class="db center" src="/examples-merged/scales/log/" marginwidth="0" marginheight="0" style="width: 100%; height: 90px;" scrolling="yes"></iframe>

<div class="flex justify-end f6 mt1 mb4">
  <form action="https://codepen.io/pen/define" method="POST" target="_blank"><input type="hidden" name="data" value="{&quot;title&quot;:&quot;D3 in Depth&quot;,&quot;js_external&quot;:&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js&quot;,&quot;html&quot;:&quot;&lt;svg width=\&quot;800\&quot; height=\&quot;80\&quot;&gt;\n  &lt;g id=\&quot;wrapper\&quot; transform=\&quot;translate(40, 40)\&quot;&gt;\n  &lt;/g&gt;\n&lt;/svg&gt;\n&quot;,&quot;css&quot;:&quot;\nbody {\n  font-family: \&quot;Helvetica Neue\&quot;, Helvetica, sans-serif;\n  font-size: 10px;\n  color: #333;\n}\ntext {\n\tfill: black;\n}\n&quot;,&quot;js&quot;:&quot;var logScale = d3.scaleLog()\n\t.domain([10, 100000])\n\t.range([0, 700]);\n\nvar myData = [10, 100, 1000, 10000, 100000];\n\nd3.select(&apos;#wrapper&apos;)\n\t.selectAll(&apos;text&apos;)\n\t.data(myData)\n\t.join(&apos;text&apos;)\n\t.attr(&apos;x&apos;, function(d) {\n\t\treturn logScale(d);\n\t})\n\t.text(function(d) {\n\t\treturn d;\n\t});\n\n&quot;}" /><input type="submit" value="Edit in CodePen" /></form>
</div>

<div>
<!-- <div class="example-links tr f8 blue mt2 mb4"> -->
	<!-- <a class="f7 black-50" href="https://bl.ocks.org/d3indepth/30d31098b607b669a7874bf4ab3c9595" target="_blank">View source</a> -->
	<!-- | <a href="https://gist.jsbin.com/d3indepth/30d31098b607b669a7874bf4ab3c9595?html,output" target="_blank">Edit in JS Bin</a> -->
	<!-- | <a class="f7 black-50" href="https://gist.run/?id=30d31098b607b669a7874bf4ab3c9595" target="_blank">Edit in GistRun</a> -->
<!-- </div> -->
</div>

<h4 id="scaletime">scaleTime</h4>

<p><code class="language-plaintext highlighter-rouge">scaleTime</code> is similar to <code class="language-plaintext highlighter-rouge">scaleLinear</code> except the domain is expressed as an array of dates. (It’s <strong>very</strong> useful when dealing with time series data.)</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">timeScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleTime</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">700</span><span class="p">]);</span>

<span class="nx">timeScale</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>   <span class="c1">// returns 0</span>
<span class="nx">timeScale</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>   <span class="c1">// returns 348.00...</span>
<span class="nx">timeScale</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>   <span class="c1">// returns 700</span></code></pre></figure>

<!-- <iframe class="db center" src="/blocks/scales/time/" marginwidth="0" marginheight="0" style="width: 100%; height: 90px;" scrolling="yes"></iframe> -->

<iframe class="db center" src="/examples-merged/scales/time/" marginwidth="0" marginheight="0" style="width: 100%; height: 90px;" scrolling="yes"></iframe>

<div class="flex justify-end f6 mt1 mb4">
  <form action="https://codepen.io/pen/define" method="POST" target="_blank"><input type="hidden" name="data" value="{&quot;title&quot;:&quot;D3 in Depth&quot;,&quot;js_external&quot;:&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js&quot;,&quot;html&quot;:&quot;&lt;svg width=\&quot;800\&quot; height=\&quot;80\&quot;&gt;\n  &lt;g id=\&quot;wrapper\&quot; transform=\&quot;translate(40, 40)\&quot;&gt;\n  &lt;/g&gt;\n&lt;/svg&gt;\n&quot;,&quot;css&quot;:&quot;\nbody {\n  font-family: \&quot;Helvetica Neue\&quot;, Helvetica, sans-serif;\n  font-size: 10px;\n  color: #333;\n}\ntext {\n\tfill: black;\n\ttext-anchor: middle;\n}\n&quot;,&quot;js&quot;:&quot;var timeScale = d3.scaleTime()\n\t.domain([new Date(2016, 0, 1), new Date(2017, 0, 1)])\n\t.range([0, 700]);\n\nvar myData = [new Date(2016, 0, 1), new Date(2016, 3, 1), new Date(2016, 6, 1), new Date(2017, 0, 1)];\n\nd3.select(&apos;#wrapper&apos;)\n\t.selectAll(&apos;circle&apos;)\n\t.data(myData)\n\t.join(&apos;circle&apos;)\n\t.attr(&apos;r&apos;, 2)\n\t.attr(&apos;cy&apos;, 8)\n\t.attr(&apos;cx&apos;, function(d) {\n\t\treturn timeScale(d);\n\t});\n\nd3.select(&apos;#wrapper&apos;)\n\t.selectAll(&apos;text&apos;)\n\t.data(myData)\n\t.join(&apos;text&apos;)\n\t.attr(&apos;x&apos;, function(d) {\n\t\treturn timeScale(d);\n\t})\n\t.text(function(d) {\n\t\treturn d.toDateString();\n\t});\n\n&quot;}" /><input type="submit" value="Edit in CodePen" /></form>
</div>

<div>
<!-- <div class="example-links tr f8 blue mt2 mb4"> -->
	<!-- <a class="f7 black-50" href="https://bl.ocks.org/d3indepth/8948c9936c71e63ef2647bc4cc2ebf78" target="_blank">View source</a> -->
	<!-- | <a href="https://gist.jsbin.com/d3indepth/8948c9936c71e63ef2647bc4cc2ebf78?html,output" target="_blank">Edit in JS Bin</a> -->
	<!-- | <a class="f7 black-50" href="https://gist.run/?id=8948c9936c71e63ef2647bc4cc2ebf78" target="_blank">Edit in GistRun</a> -->
<!-- </div> -->
</div>

<h4 id="scalesequential">scaleSequential</h4>

<p><code class="language-plaintext highlighter-rouge">scaleSequential</code> is used for mapping continuous values to an output range determined by a preset (or custom) <strong>interpolator</strong>. (An interpolator is a function that accepts input between 0 and 1 and outputs an interpolated value between two numbers, colours, strings etc.)</p>

<p>D3 provides a number of preset interpolators including many colour ones. For example you can use <code class="language-plaintext highlighter-rouge">d3.interpolateRainbow</code> to create the well known rainbow colour scale:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">sequentialScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleSequential</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">interpolator</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">interpolateRainbow</span><span class="p">);</span>

<span class="nx">sequentialScale</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>   <span class="c1">// returns 'rgb(110, 64, 170)'</span>
<span class="nx">sequentialScale</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>  <span class="c1">// returns 'rgb(175, 240, 91)'</span>
<span class="nx">sequentialScale</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span> <span class="c1">// returns 'rgb(110, 64, 170)'</span></code></pre></figure>

<!-- <iframe class="db center" src="/blocks/scales/sequential/" marginwidth="0" marginheight="0" style="width: 100%; height: 90px;" scrolling="yes"></iframe> -->

<iframe class="db center" src="/examples-merged/scales/sequential/" marginwidth="0" marginheight="0" style="width: 100%; height: 90px;" scrolling="yes"></iframe>

<div class="flex justify-end f6 mt1 mb4">
  <form action="https://codepen.io/pen/define" method="POST" target="_blank"><input type="hidden" name="data" value="{&quot;title&quot;:&quot;D3 in Depth&quot;,&quot;js_external&quot;:&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js&quot;,&quot;html&quot;:&quot;&lt;svg width=\&quot;700\&quot; height=\&quot;80\&quot;&gt;\n  &lt;g id=\&quot;wrapper\&quot; transform=\&quot;translate(40, 40)\&quot;&gt;\n  &lt;/g&gt;\n&lt;/svg&gt;\n&quot;,&quot;css&quot;:&quot;\nbody {\n  font-family: \&quot;Helvetica Neue\&quot;, Helvetica, sans-serif;\n  font-size: 14px;\n  color: #333;\n}\n&quot;,&quot;js&quot;:&quot;var linearScale = d3.scaleLinear()\n\t.domain([0, 100])\n\t.range([0, 600]);\n\nvar sequentialScale = d3.scaleSequential()\n\t.domain([0, 100])\n\t.interpolator(d3.interpolateRainbow);\n\nvar myData = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100];\n\nd3.select(&apos;#wrapper&apos;)\n\t.selectAll(&apos;circle&apos;)\n\t.data(myData)\n\t.join(&apos;circle&apos;)\n\t.attr(&apos;r&apos;, 10)\n\t.attr(&apos;cx&apos;, function(d) {\n\t\treturn linearScale(d);\n\t})\n\t.style(&apos;fill&apos;, function(d) {\n\t\treturn sequentialScale(d);\n\t});\n\n&quot;}" /><input type="submit" value="Edit in CodePen" /></form>
</div>

<div>
<!-- <div class="example-links tr f8 blue mt2 mb4"> -->
	<!-- <a class="f7 black-50" href="https://bl.ocks.org/d3indepth/de07fcf34538cd6f8459e17038563ed3" target="_blank">View source</a> -->
	<!-- | <a href="https://gist.jsbin.com/d3indepth/de07fcf34538cd6f8459e17038563ed3?html,output" target="_blank">Edit in JS Bin</a> -->
	<!-- | <a class="f7 black-50" href="https://gist.run/?id=de07fcf34538cd6f8459e17038563ed3" target="_blank">Edit in GistRun</a> -->
<!-- </div> -->
</div>

<p>Note that the interpolator determines the output range so you don’t need to specify the range yourself.</p>

<p>The example below shows some of the other colour interpolators provided by D3:</p>

<!-- <iframe class="db center" src="/blocks/scales/sequential-options/" marginwidth="0" marginheight="0" style="width: 100%; height: 600px;" scrolling="yes"></iframe> -->

<iframe class="db center" src="/examples-merged/scales/sequential-options/" marginwidth="0" marginheight="0" style="width: 100%; height: 600px;" scrolling="yes"></iframe>

<div class="flex justify-end f6 mt1 mb4">
  <form action="https://codepen.io/pen/define" method="POST" target="_blank"><input type="hidden" name="data" value="{&quot;title&quot;:&quot;D3 in Depth&quot;,&quot;js_external&quot;:&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js&quot;,&quot;html&quot;:&quot;&lt;svg width=\&quot;700\&quot; height=\&quot;580\&quot;&gt;\n  &lt;g id=\&quot;wrapper\&quot; transform=\&quot;translate(40, 40)\&quot;&gt;\n  &lt;/g&gt;\n&lt;/svg&gt;\n&quot;,&quot;css&quot;:&quot;\nbody {\n  font-family: \&quot;Helvetica Neue\&quot;, Helvetica, sans-serif;\n  font-size: 12px;\n  color: #333;\n}\ntext {\n\tfill: #777;\n}\n&quot;,&quot;js&quot;:&quot;var linearScale = d3.scaleLinear()\n\t.domain([0, 100])\n\t.range([0, 600]);\n\nvar sequentialScale = d3.scaleSequential()\n\t.domain([0, 100]);\n\nvar interpolators = [\n\t&apos;interpolateViridis&apos;,\n\t&apos;interpolateInferno&apos;,\n\t&apos;interpolateMagma&apos;,\n\t&apos;interpolatePlasma&apos;,\n\t&apos;interpolateWarm&apos;,\n\t&apos;interpolateCool&apos;,\n\t&apos;interpolateRainbow&apos;,\n\t&apos;interpolateCubehelixDefault&apos;\n];\n\nvar myData = d3.range(0, 100, 2);\n\nfunction dots(d) {\n\tsequentialScale\n\t\t.interpolator(d3[d]);\n\n\td3.select(this)\n\t\t.append(&apos;text&apos;)\n\t\t.attr(&apos;y&apos;, -10)\n\t\t.text(d);\n\n\td3.select(this)\n\t\t.selectAll(&apos;rect&apos;)\n\t\t.data(myData)\n\t\t.join(&apos;rect&apos;)\n\t\t.attr(&apos;x&apos;, function(d) {\n\t\t\treturn linearScale(d);\n\t\t})\n\t\t.attr(&apos;width&apos;, 11)\n\t\t.attr(&apos;height&apos;, 30)\n\t\t.style(&apos;fill&apos;, function(d) {\n\t\t\treturn sequentialScale(d);\n\t\t});\n}\n\nd3.select(&apos;#wrapper&apos;)\n\t.selectAll(&apos;g.interpolator&apos;)\n\t.data(interpolators)\n\t.join(&apos;g&apos;)\n\t.classed(&apos;interpolator&apos;, true)\n\t.attr(&apos;transform&apos;, function(d, i) {\n\t\treturn &apos;translate(0, &apos; + (i * 70) + &apos;)&apos;;\n\t})\n\t.each(dots);\n\n\n  \n&quot;}" /><input type="submit" value="Edit in CodePen" /></form>
</div>

<div>
<!-- <div class="example-links tr f8 blue mt2 mb4"> -->
	<!-- <a class="f7 black-50" href="https://bl.ocks.org/d3indepth/89ced137bece23b908cf51580d5e082d" target="_blank">View source</a> -->
	<!-- | <a href="https://gist.jsbin.com/d3indepth/89ced137bece23b908cf51580d5e082d?html,output" target="_blank">Edit in JS Bin</a> -->
	<!-- | <a class="f7 black-50" href="https://gist.run/?id=89ced137bece23b908cf51580d5e082d" target="_blank">Edit in GistRun</a> -->
<!-- </div> -->
</div>

<p>There’s also a plug-in <a href="https://github.com/d3/d3-scale-chromatic">d3-scale-chromatic</a> which provides the well known <a href="http://colorbrewer2.org/#type=sequential&amp;scheme=BuGn&amp;n=3">ColorBrewer</a> colour schemes.</p>

<h4 id="clamping">Clamping</h4>

<p>By default <code class="language-plaintext highlighter-rouge">scaleLinear</code>, <code class="language-plaintext highlighter-rouge">scalePow</code>, <code class="language-plaintext highlighter-rouge">scaleSqrt</code>, <code class="language-plaintext highlighter-rouge">scaleLog</code>, <code class="language-plaintext highlighter-rouge">scaleTime</code> and <code class="language-plaintext highlighter-rouge">scaleSequential</code> extrapolate when the input value goes beyond the domain.</p>

<p>For example:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">linearScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">]);</span>

<span class="nx">linearScale</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>  <span class="c1">// returns 200</span>
<span class="nx">linearScale</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// returns -100</span></code></pre></figure>

<p>You can <strong>clamp</strong> the scale function so that the input value stays within the domain using <code class="language-plaintext highlighter-rouge">.clamp</code>:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">linearScale</span><span class="p">.</span><span class="nx">clamp</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="nx">linearScale</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>  <span class="c1">// returns 100</span>
<span class="nx">linearScale</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// returns 0</span></code></pre></figure>

<p>You can switch off clamping using <code class="language-plaintext highlighter-rouge">.clamp(false)</code>.</p>

<h4 id="nice">Nice</h4>

<p>If the domain has been computed automatically from real data (e.g. by using <code class="language-plaintext highlighter-rouge">d3.extent</code>) the start and end values might not be round figures. This isn’t necessarily a problem, but if using the scale to define an axis, it can look a bit untidy:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.243</span><span class="p">,</span> <span class="mf">0.584</span><span class="p">,</span> <span class="mf">0.987</span><span class="p">,</span> <span class="mf">0.153</span><span class="p">,</span> <span class="mf">0.433</span><span class="p">];</span>
<span class="kd">let</span> <span class="nx">extent</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">extent</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">linearScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">(</span><span class="nx">extent</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">]);</span></code></pre></figure>

<!-- <iframe class="db center" src="/blocks/scales/axis/" marginwidth="0" marginheight="0" style="width: 100%; height: 110px;" scrolling="yes"></iframe> -->

<iframe class="db center" src="/examples-merged/scales/axis/" marginwidth="0" marginheight="0" style="width: 100%; height: 110px;" scrolling="yes"></iframe>

<div class="flex justify-end f6 mt1 mb4">
  <form action="https://codepen.io/pen/define" method="POST" target="_blank"><input type="hidden" name="data" value="{&quot;title&quot;:&quot;D3 in Depth&quot;,&quot;js_external&quot;:&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js&quot;,&quot;html&quot;:&quot;\n  &lt;svg width=\&quot;700\&quot; height=\&quot;100\&quot;&gt;\n  \t&lt;g class=\&quot;axis\&quot; transform=\&quot;translate(20, 40)\&quot;&gt;\n  \t&lt;/g&gt;\n  &lt;/svg&gt;\n\n  &quot;,&quot;css&quot;:&quot;\nbody {\n  font-family: \&quot;Helvetica Neue\&quot;, Helvetica, sans-serif;\n  font-size: 12px;\n}\n&quot;,&quot;js&quot;:&quot;\nvar data = [0.243, 0.584, 0.987, 0.153, 0.433];\nvar extent = d3.extent(data);\n\nvar linearScale = d3.scaleLinear()\n  .domain(extent)\n  .range([0, 600]);\n\nvar axis = d3.axisBottom(linearScale);\n\nd3.select(&apos;.axis&apos;)\n\t.call(axis);\n  &quot;}" /><input type="submit" value="Edit in CodePen" /></form>
</div>

<div>
<!-- <div class="example-links tr f8 blue mt2 mb4"> -->
	<!-- <a class="f7 black-50" href="https://bl.ocks.org/d3indepth/21354e1a7c753624e0a76b7984ae65c1" target="_blank">View source</a> -->
	<!-- | <a href="https://gist.jsbin.com/d3indepth/21354e1a7c753624e0a76b7984ae65c1?html,output" target="_blank">Edit in JS Bin</a> -->
	<!-- | <a class="f7 black-50" href="https://gist.run/?id=21354e1a7c753624e0a76b7984ae65c1" target="_blank">Edit in GistRun</a> -->
<!-- </div> -->
</div>

<p>Therefore D3 provides a function <code class="language-plaintext highlighter-rouge">.nice()</code> on the scales in this chapter which will round the domain to ‘nice’ round values:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.243</span><span class="p">,</span> <span class="mf">0.584</span><span class="p">,</span> <span class="mf">0.987</span><span class="p">,</span> <span class="mf">0.153</span><span class="p">,</span> <span class="mf">0.433</span><span class="p">];</span>
<span class="kd">let</span> <span class="nx">extent</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">extent</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">linearScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">(</span><span class="nx">extent</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">nice</span><span class="p">();</span></code></pre></figure>

<!-- <iframe class="db center" src="/blocks/scales/nice/" marginwidth="0" marginheight="0" style="width: 100%; height: 110px;" scrolling="yes"></iframe> -->

<iframe class="db center" src="/examples-merged/scales/nice/" marginwidth="0" marginheight="0" style="width: 100%; height: 110px;" scrolling="yes"></iframe>

<div class="flex justify-end f6 mt1 mb4">
  <form action="https://codepen.io/pen/define" method="POST" target="_blank"><input type="hidden" name="data" value="{&quot;title&quot;:&quot;D3 in Depth&quot;,&quot;js_external&quot;:&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js&quot;,&quot;html&quot;:&quot;&lt;svg width=\&quot;700\&quot; height=\&quot;100\&quot;&gt;\n  &lt;g class=\&quot;axis\&quot; transform=\&quot;translate(20, 40)\&quot;&gt;\n  &lt;/g&gt;\n&lt;/svg&gt;\n&quot;,&quot;css&quot;:&quot;\nbody {\n  font-family: \&quot;Helvetica Neue\&quot;, Helvetica, sans-serif;\n  font-size: 12px;\n}\n&quot;,&quot;js&quot;:&quot;var data = [0.243, 0.584, 0.987, 0.153, 0.433];\nvar extent = d3.extent(data);\n\nvar linearScale = d3.scaleLinear()\n\t.domain(extent)\n\t.range([0, 600])\n\t.nice();\n\nvar axis = d3.axisBottom(linearScale);\n\nd3.select(&apos;.axis&apos;)\n\t.call(axis);\n&quot;}" /><input type="submit" value="Edit in CodePen" /></form>
</div>

<div>
<!-- <div class="example-links tr f8 blue mt2 mb4"> -->
	<!-- <a class="f7 black-50" href="https://bl.ocks.org/d3indepth/31a6253a01d29e99fa2daf0364b59019" target="_blank">View source</a> -->
	<!-- | <a href="https://gist.jsbin.com/d3indepth/31a6253a01d29e99fa2daf0364b59019?html,output" target="_blank">Edit in JS Bin</a> -->
	<!-- | <a class="f7 black-50" href="https://gist.run/?id=31a6253a01d29e99fa2daf0364b59019" target="_blank">Edit in GistRun</a> -->
<!-- </div> -->
</div>

<p>Note that <code class="language-plaintext highlighter-rouge">.nice()</code> must be called each time the domain is updated.</p>

<h4 id="multiple-segments">Multiple segments</h4>

<p>The domain and range of <code class="language-plaintext highlighter-rouge">scaleLinear</code>, <code class="language-plaintext highlighter-rouge">scalePow</code>, <code class="language-plaintext highlighter-rouge">scaleSqrt</code>, <code class="language-plaintext highlighter-rouge">scaleLog</code> and <code class="language-plaintext highlighter-rouge">scaleTime</code> usually consists of two values, but if you provide 3 or more values the scale function is subdivided into multiple segments:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">linearScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="dl">'</span><span class="s1">red</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">#ddd</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">blue</span><span class="dl">'</span><span class="p">]);</span>

<span class="nx">linearScale</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">);</span>  <span class="c1">// returns "rgb(255, 0, 0)"</span>
<span class="nx">linearScale</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>    <span class="c1">// returns "rgb(221, 221, 221)"</span>
<span class="nx">linearScale</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>    <span class="c1">// returns "rgb(111, 111, 238)"</span></code></pre></figure>

<!-- <iframe class="db center" src="/blocks/scales/multisegment/" marginwidth="0" marginheight="0" style="width: 100%; height: 90px;" scrolling="yes"></iframe> -->

<iframe class="db center" src="/examples-merged/scales/multisegment/" marginwidth="0" marginheight="0" style="width: 100%; height: 90px;" scrolling="yes"></iframe>

<div class="flex justify-end f6 mt1 mb4">
  <form action="https://codepen.io/pen/define" method="POST" target="_blank"><input type="hidden" name="data" value="{&quot;title&quot;:&quot;D3 in Depth&quot;,&quot;js_external&quot;:&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js&quot;,&quot;html&quot;:&quot;\n  &lt;svg width=\&quot;700\&quot; height=\&quot;80\&quot;&gt;\n  \t&lt;g id=\&quot;wrapper\&quot; transform=\&quot;translate(40, 40)\&quot;&gt;\n  \t&lt;/g&gt;\n  &lt;/svg&gt;\n\n  &quot;,&quot;css&quot;:&quot;\nbody {\n  font-family: \&quot;Helvetica Neue\&quot;, Helvetica, sans-serif;\n  font-size: 14px;\n  color: #333;\n}\n&quot;,&quot;js&quot;:&quot;\nvar xScale = d3.scaleLinear()\n\t.domain([-10, 10])\n\t.range([0, 600]);\n\nvar linearScale = d3.scaleLinear()\n\t.domain([-10, 0, 10])\n\t.range([&apos;red&apos;, &apos;#ddd&apos;, &apos;blue&apos;]);\n\nvar myData = [-10, -8, -6, -4, -2, 0, 2, 4, 6, 8, 10];\n\nd3.select(&apos;#wrapper&apos;)\n\t.selectAll(&apos;circle&apos;)\n\t.data(myData)\n\t.enter()\n\t.append(&apos;circle&apos;)\n\t.attr(&apos;r&apos;, 10)\n\t.attr(&apos;cx&apos;, function(d) {\n\t\treturn xScale(d);\n\t})\n\t.style(&apos;fill&apos;, function(d) {\n\t\treturn linearScale(d);\n\t});\n\n  &quot;}" /><input type="submit" value="Edit in CodePen" /></form>
</div>

<div>
<!-- <div class="example-links tr f8 blue mt2 mb4"> -->
	<!-- <a class="f7 black-50" href="https://bl.ocks.org/d3indepth/55f3253d6232f682708a3db0da207e65" target="_blank">View source</a> -->
	<!-- | <a href="https://gist.jsbin.com/d3indepth/55f3253d6232f682708a3db0da207e65?html,output" target="_blank">Edit in JS Bin</a> -->
	<!-- | <a class="f7 black-50" href="https://gist.run/?id=55f3253d6232f682708a3db0da207e65" target="_blank">Edit in GistRun</a> -->
<!-- </div> -->
</div>

<p>Typically multiple segments are used for distinguishing between negative and positive values (such as in the example above). You can use as many segments as you like as long as the domain and range are of the same length.</p>

<h4 id="inversion">Inversion</h4>

<p>The <code class="language-plaintext highlighter-rouge">.invert()</code> method lets you determine a scale function’s <strong>input</strong> value given an <strong>output</strong> value (provided the scale function has a numeric domain):</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">linearScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">]);</span>

<span class="nx">linearScale</span><span class="p">.</span><span class="nx">invert</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>   <span class="c1">// returns 5</span>
<span class="nx">linearScale</span><span class="p">.</span><span class="nx">invert</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>  <span class="c1">// returns 10</span></code></pre></figure>

<p>A common use case is when you want to convert a user’s click along an axis into a domain value:</p>

<!-- <iframe class="db center" src="/blocks/scales/invert/" marginwidth="0" marginheight="0" style="width: 100%; height: 100px;" scrolling="yes"></iframe> -->

<iframe class="db center" src="/examples-merged/scales/invert/" marginwidth="0" marginheight="0" style="width: 100%; height: 100px;" scrolling="yes"></iframe>

<div class="flex justify-end f6 mt1 mb4">
  <form action="https://codepen.io/pen/define" method="POST" target="_blank"><input type="hidden" name="data" value="{&quot;title&quot;:&quot;D3 in Depth&quot;,&quot;js_external&quot;:&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js&quot;,&quot;html&quot;:&quot;&lt;svg width=\&quot;700\&quot; height=\&quot;80\&quot;&gt;\n  &lt;g transform=\&quot;translate(20, 10)\&quot;&gt;\n\t&lt;g class=\&quot;axis\&quot; transform=\&quot;translate(0, 40)\&quot;&gt;&lt;/g&gt;\n\t&lt;rect class=\&quot;click-area\&quot;&gt;&lt;/rect&gt;\n  &lt;/g&gt;\n&lt;/svg&gt;\n\n&lt;div class=\&quot;info\&quot;&gt;Click on the grey band&lt;/div&gt;\n&quot;,&quot;css&quot;:&quot;\nbody {\n  font-family: \&quot;Helvetica Neue\&quot;, Helvetica, sans-serif;\n  font-size: 12px;\n}\nrect {\n\tfill: #ccc;\n\tcursor: pointer;\n}\n.info {\n\tmargin-left: 20px;\n}\n&quot;,&quot;js&quot;:&quot;var width = 600;\n\nvar linearScale = d3.scaleLinear()\n\t.domain([-50, 50])\n\t.range([0, width])\n\t.nice();\n\nvar clickArea = d3.select(&apos;.click-area&apos;).node();\n\nfunction doClick(e) {\n\tvar pos = d3.pointer(e, clickArea);\n\tvar xPos = pos[0];\n\tvar value = linearScale.invert(xPos);\n\td3.select(&apos;.info&apos;)\n\t\t.text(&apos;You clicked &apos; + value.toFixed(2));\n}\n\n// Construct axis\nvar axis = d3.axisBottom(linearScale);\nd3.select(&apos;.axis&apos;)\n\t.call(axis);\n\n// Update click area size\nd3.select(&apos;.click-area&apos;)\n\t.attr(&apos;width&apos;, width)\n\t.attr(&apos;height&apos;, 40)\n\t.on(&apos;click&apos;, doClick);\n\n&quot;}" /><input type="submit" value="Edit in CodePen" /></form>
</div>

<div>
<!-- <div class="example-links tr f8 blue mt2 mb4"> -->
	<!-- <a class="f7 black-50" href="https://bl.ocks.org/d3indepth/12af91c5f58bc9eedf96f7c0a9f5622f" target="_blank">View source</a> -->
	<!-- | <a href="https://gist.jsbin.com/d3indepth/12af91c5f58bc9eedf96f7c0a9f5622f?html,output" target="_blank">Edit in JS Bin</a> -->
	<!-- | <a class="f7 black-50" href="https://gist.run/?id=12af91c5f58bc9eedf96f7c0a9f5622f" target="_blank">Edit in GistRun</a> -->
<!-- </div> -->
</div>

<h3 id="scales-with-continuous-input-and-discrete-output">Scales with continuous input and discrete output</h3>

<h4 id="scalequantize">scaleQuantize</h4>

<p><code class="language-plaintext highlighter-rouge">scaleQuantize</code> accepts continuous input and outputs a number of discrete quantities defined by the range.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">quantizeScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleQuantize</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="dl">'</span><span class="s1">lightblue</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">orange</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">lightgreen</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">pink</span><span class="dl">'</span><span class="p">]);</span>

<span class="nx">quantizeScale</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>  <span class="c1">// returns 'lightblue'</span>
<span class="nx">quantizeScale</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>  <span class="c1">// returns 'orange'</span>
<span class="nx">quantizeScale</span><span class="p">(</span><span class="mi">90</span><span class="p">);</span>  <span class="c1">// returns 'pink'</span></code></pre></figure>

<p>Each range value is mapped to an equal sized chunk in the domain so in the example above:</p>

<ul>
  <li>0 ≤ <em>u</em> &lt; 25 is mapped to ‘lightblue’</li>
  <li>25 ≤ <em>u</em> &lt; 50 is mapped to ‘orange’</li>
  <li>50 ≤ <em>u</em> &lt; 75 is mapped to ‘lightgreen’</li>
  <li>75 ≤ <em>u</em> &lt; 100 is mapped to ‘pink’</li>
</ul>

<p>where <em>u</em> is the input value.</p>

<!-- <iframe class="db center" src="/blocks/scales/quantize/" marginwidth="0" marginheight="0" style="width: 100%; height: 60px;" scrolling="yes"></iframe> -->

<iframe class="db center" src="/examples-merged/scales/quantize/" marginwidth="0" marginheight="0" style="width: 100%; height: 60px;" scrolling="yes"></iframe>

<div class="flex justify-end f6 mt1 mb4">
  <form action="https://codepen.io/pen/define" method="POST" target="_blank"><input type="hidden" name="data" value="{&quot;title&quot;:&quot;D3 in Depth&quot;,&quot;js_external&quot;:&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js&quot;,&quot;html&quot;:&quot;&lt;svg width=\&quot;700\&quot; height=\&quot;40\&quot;&gt;\n  &lt;g id=\&quot;wrapper\&quot; transform=\&quot;translate(40,10)\&quot;&gt;\n  &lt;/g&gt;\n&lt;/svg&gt;\n&quot;,&quot;css&quot;:&quot;\nbody {\n  font-family: \&quot;Helvetica Neue\&quot;, Helvetica, sans-serif;\n  font-size: 14px;\n  color: #333;\n}\n&quot;,&quot;js&quot;:&quot;var linearScale = d3.scaleLinear()\n\t.domain([0, 100])\n\t.range([0, 600]);\n\nvar quantizeScale = d3.scaleQuantize()\n\t.domain([0, 100])\n\t.range([&apos;lightblue&apos;, &apos;orange&apos;, &apos;lightgreen&apos;, &apos;pink&apos;]);\n\nvar myData = d3.range(0, 100, 1);\n\nd3.select(&apos;#wrapper&apos;)\n\t.selectAll(&apos;rect&apos;)\n\t.data(myData)\n\t.join(&apos;rect&apos;)\n\t.attr(&apos;x&apos;, function(d) {\n\t\treturn linearScale(d);\n\t})\n\t.attr(&apos;width&apos;, 5)\n\t.attr(&apos;height&apos;, 30)\n\t.style(&apos;fill&apos;, function(d) {\n\t\treturn quantizeScale(d);\n\t});\n\n&quot;}" /><input type="submit" value="Edit in CodePen" /></form>
</div>

<div>
<!-- <div class="example-links tr f8 blue mt2 mb4"> -->
	<!-- <a class="f7 black-50" href="https://bl.ocks.org/d3indepth/d22a326dc44b2d47d9f18815fbccf178" target="_blank">View source</a> -->
	<!-- | <a href="https://gist.jsbin.com/d3indepth/d22a326dc44b2d47d9f18815fbccf178?html,output" target="_blank">Edit in JS Bin</a> -->
	<!-- | <a class="f7 black-50" href="https://gist.run/?id=d22a326dc44b2d47d9f18815fbccf178" target="_blank">Edit in GistRun</a> -->
<!-- </div> -->
</div>

<p>Input values outside the domain are clamped so in our example <code class="language-plaintext highlighter-rouge">quantizeScale(-10)</code> returns ‘lightblue’ and <code class="language-plaintext highlighter-rouge">quantizeScale(110)</code> returns ‘pink’.</p>

<h4 id="scalequantile">scaleQuantile</h4>

<p><code class="language-plaintext highlighter-rouge">scaleQuantile</code> maps continuous numeric input to discrete values. The domain is defined by <strong>an array of numbers</strong>:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">myData</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">100</span><span class="p">];</span>

<span class="kd">let</span> <span class="nx">quantileScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleQuantile</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">(</span><span class="nx">myData</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="dl">'</span><span class="s1">lightblue</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">orange</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">lightgreen</span><span class="dl">'</span><span class="p">]);</span>

<span class="nx">quantileScale</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>   <span class="c1">// returns 'lightblue'</span>
<span class="nx">quantileScale</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>  <span class="c1">// returns 'lightblue'</span>
<span class="nx">quantileScale</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>  <span class="c1">// returns 'orange'</span>
<span class="nx">quantileScale</span><span class="p">(</span><span class="mi">65</span><span class="p">);</span>  <span class="c1">// returns 'lightgreen'</span></code></pre></figure>

<!-- <iframe class="db center" src="/blocks/scales/quantile/" marginwidth="0" marginheight="0" style="width: 100%; height: 90px;" scrolling="yes"></iframe> -->

<iframe class="db center" src="/examples-merged/scales/quantile/" marginwidth="0" marginheight="0" style="width: 100%; height: 90px;" scrolling="yes"></iframe>

<div class="flex justify-end f6 mt1 mb4">
  <form action="https://codepen.io/pen/define" method="POST" target="_blank"><input type="hidden" name="data" value="{&quot;title&quot;:&quot;D3 in Depth&quot;,&quot;js_external&quot;:&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js&quot;,&quot;html&quot;:&quot;&lt;svg width=\&quot;700\&quot; height=\&quot;80\&quot;&gt;\n  &lt;g id=\&quot;wrapper\&quot; transform=\&quot;translate(40, 40)\&quot;&gt;\n  &lt;/g&gt;\n&lt;/svg&gt;\n&quot;,&quot;css&quot;:&quot;\nbody {\n  font-family: \&quot;Helvetica Neue\&quot;, Helvetica, sans-serif;\n  font-size: 14px;\n  color: #333;\n}\n&quot;,&quot;js&quot;:&quot;var myData = [0, 5, 7, 10, 20, 30, 35, 40, 60, 62, 65, 70, 80, 90, 100];\n\nvar linearScale = d3.scaleLinear()\n\t.domain([0, 100])\n\t.range([0, 600]);\n\nvar quantileScale = d3.scaleQuantile()\n\t.domain(myData)\n\t.range([&apos;lightblue&apos;, &apos;orange&apos;, &apos;lightgreen&apos;]);\n\nd3.select(&apos;#wrapper&apos;)\n\t.selectAll(&apos;circle&apos;)\n\t.data(myData)\n\t.join(&apos;circle&apos;)\n\t.attr(&apos;r&apos;, 3)\n\t.attr(&apos;cx&apos;, function(d) {\n\t\treturn linearScale(d);\n\t})\n\t.style(&apos;fill&apos;, function(d) {\n\t\treturn quantileScale(d);\n\t});\n\n&quot;}" /><input type="submit" value="Edit in CodePen" /></form>
</div>

<div>
<!-- <div class="example-links tr f8 blue mt2 mb4"> -->
	<!-- <a class="f7 black-50" href="https://bl.ocks.org/d3indepth/28a4d5956b1318b4a007b10c3820f544" target="_blank">View source</a> -->
	<!-- | <a href="https://gist.jsbin.com/d3indepth/28a4d5956b1318b4a007b10c3820f544?html,output" target="_blank">Edit in JS Bin</a> -->
	<!-- | <a class="f7 black-50" href="https://gist.run/?id=28a4d5956b1318b4a007b10c3820f544" target="_blank">Edit in GistRun</a> -->
<!-- </div> -->
</div>

<p>The (sorted) domain array is divided into <em>n</em> equal sized groups where <em>n</em> is the number of range values.</p>

<p>Therefore in the above example the domain array is split into 3 groups where:</p>

<ul>
  <li>the first 5 values are mapped to ‘lightblue’</li>
  <li>the next 5 values to ‘orange’ and</li>
  <li>the last 5 values to ‘lightgreen’.</li>
</ul>

<p>The split points of the domain can be accessed using <code class="language-plaintext highlighter-rouge">.quantiles()</code>:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">quantileScale</span><span class="p">.</span><span class="nx">quantiles</span><span class="p">();</span>  <span class="c1">// returns [26.66..., 63]</span></code></pre></figure>

<p>If the range contains 4 values <code class="language-plaintext highlighter-rouge">quantileScale</code> computes the <strong>quartiles</strong> of the data. In other words, the lowest 25% of the data is mapped to <code class="language-plaintext highlighter-rouge">range[0]</code>, the next 25% of the data is mapped to <code class="language-plaintext highlighter-rouge">range[1]</code> etc.</p>

<h4 id="scalethreshold">scaleThreshold</h4>

<p><code class="language-plaintext highlighter-rouge">scaleThreshold</code> maps continuous numeric input to discrete values defined by the range. <em>n-1</em> domain split points are specified where <em>n</em> is the number of range values.</p>

<p>In the following example we split the domain at <code class="language-plaintext highlighter-rouge">0</code>, <code class="language-plaintext highlighter-rouge">50</code> and <code class="language-plaintext highlighter-rouge">100</code></p>

<ul>
  <li><em>u</em> &lt; 0 is mapped to ‘#ccc’</li>
  <li>0 ≤ <em>u</em> &lt; 50 to ‘lightblue’</li>
  <li>50 ≤ <em>u</em> &lt; 100 to ‘orange’</li>
  <li><em>u</em> ≥ 100 to ‘#ccc’</li>
</ul>

<p>where <em>u</em> is the input value.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">thresholdScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleThreshold</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="dl">'</span><span class="s1">#ccc</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">lightblue</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">orange</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">#ccc</span><span class="dl">'</span><span class="p">]);</span>

<span class="nx">thresholdScale</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">);</span>  <span class="c1">// returns '#ccc'</span>
<span class="nx">thresholdScale</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>   <span class="c1">// returns 'lightblue'</span>
<span class="nx">thresholdScale</span><span class="p">(</span><span class="mi">70</span><span class="p">);</span>   <span class="c1">// returns 'orange'</span>
<span class="nx">thresholdScale</span><span class="p">(</span><span class="mi">110</span><span class="p">);</span>  <span class="c1">// returns '#ccc'</span></code></pre></figure>

<!-- <iframe class="db center" src="/blocks/scales/threshold/" marginwidth="0" marginheight="0" style="width: 100%; height: 90px;" scrolling="yes"></iframe> -->

<iframe class="db center" src="/examples-merged/scales/threshold/" marginwidth="0" marginheight="0" style="width: 100%; height: 90px;" scrolling="yes"></iframe>

<div class="flex justify-end f6 mt1 mb4">
  <form action="https://codepen.io/pen/define" method="POST" target="_blank"><input type="hidden" name="data" value="{&quot;title&quot;:&quot;D3 in Depth&quot;,&quot;js_external&quot;:&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js&quot;,&quot;html&quot;:&quot;&lt;svg width=\&quot;700\&quot; height=\&quot;80\&quot;&gt;\n  &lt;g id=\&quot;wrapper\&quot; transform=\&quot;translate(100, 40)\&quot;&gt;\n  &lt;/g&gt;\n&lt;/svg&gt;\n&quot;,&quot;css&quot;:&quot;\nbody {\n  font-family: \&quot;Helvetica Neue\&quot;, Helvetica, sans-serif;\n  font-size: 14px;\n  color: #333;\n}\n&quot;,&quot;js&quot;:&quot;var linearScale = d3.scaleLinear()\n\t.domain([-10, 110])\n\t.range([0, 600]);\n\nvar thresholdScale = d3.scaleThreshold()\n\t.domain([0, 50, 100])\n\t.range([&apos;#ccc&apos;, &apos;lightblue&apos;, &apos;orange&apos;, &apos;#ccc&apos;]);\n\nvar myData = d3.range(-10, 110, 2);\n\nd3.select(&apos;#wrapper&apos;)\n\t.selectAll(&apos;rect&apos;)\n\t.data(myData)\n\t.join(&apos;rect&apos;)\n\t.attr(&apos;x&apos;, function(d) {\n\t\treturn linearScale(d);\n\t})\n\t.attr(&apos;width&apos;, 9)\n\t.attr(&apos;height&apos;, 30)\n\t.style(&apos;fill&apos;, function(d) {\n\t\treturn thresholdScale(d);\n\t});\n\n&quot;}" /><input type="submit" value="Edit in CodePen" /></form>
</div>

<div>
<!-- <div class="example-links tr f8 blue mt2 mb4"> -->
	<!-- <a class="f7 black-50" href="https://bl.ocks.org/d3indepth/40fea6694f84dfda46b00ea6ce2cf919" target="_blank">View source</a> -->
	<!-- | <a href="https://gist.jsbin.com/d3indepth/40fea6694f84dfda46b00ea6ce2cf919?html,output" target="_blank">Edit in JS Bin</a> -->
	<!-- | <a class="f7 black-50" href="https://gist.run/?id=40fea6694f84dfda46b00ea6ce2cf919" target="_blank">Edit in GistRun</a> -->
<!-- </div> -->
</div>

<h3 id="scales-with-discrete-input-and-discrete-output">Scales with discrete input and discrete output</h3>

<h4 id="scaleordinal">scaleOrdinal</h4>

<p><code class="language-plaintext highlighter-rouge">scaleOrdinal</code> maps discrete values (specified by an array) to discrete values (also specified by an array). The domain array specifies the possible input values and the range array the output values. The range array will repeat if it’s shorter than the domain array.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">myData</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Jan</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Feb</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Mar</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Apr</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">May</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Jun</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Jul</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Aug</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Sep</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Oct</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Nov</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Dec</span><span class="dl">'</span><span class="p">]</span>

<span class="kd">let</span> <span class="nx">ordinalScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleOrdinal</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">(</span><span class="nx">myData</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="dl">'</span><span class="s1">black</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">#ccc</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">#ccc</span><span class="dl">'</span><span class="p">]);</span>

<span class="nx">ordinalScale</span><span class="p">(</span><span class="dl">'</span><span class="s1">Jan</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">// returns 'black';</span>
<span class="nx">ordinalScale</span><span class="p">(</span><span class="dl">'</span><span class="s1">Feb</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">// returns '#ccc';</span>
<span class="nx">ordinalScale</span><span class="p">(</span><span class="dl">'</span><span class="s1">Mar</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">// returns '#ccc';</span>
<span class="nx">ordinalScale</span><span class="p">(</span><span class="dl">'</span><span class="s1">Apr</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">// returns 'black';</span></code></pre></figure>

<!-- <iframe class="db center" src="/blocks/scales/ordinal/" marginwidth="0" marginheight="0" style="width: 100%; height: 80px;" scrolling="yes"></iframe> -->

<iframe class="db center" src="/examples-merged/scales/ordinal/" marginwidth="0" marginheight="0" style="width: 100%; height: 80px;" scrolling="yes"></iframe>

<div class="flex justify-end f6 mt1 mb4">
  <form action="https://codepen.io/pen/define" method="POST" target="_blank"><input type="hidden" name="data" value="{&quot;title&quot;:&quot;D3 in Depth&quot;,&quot;js_external&quot;:&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js&quot;,&quot;html&quot;:&quot;&lt;svg width=\&quot;800\&quot; height=\&quot;60\&quot;&gt;\n  &lt;g id=\&quot;wrapper\&quot; transform=\&quot;translate(100, 40)\&quot;&gt;\n  &lt;/g&gt;\n&lt;/svg&gt;\n&quot;,&quot;css&quot;:&quot;\nbody {\n  font-family: \&quot;Helvetica Neue\&quot;, Helvetica, sans-serif;\n  font-size: 14px;\n  color: #333;\n}\n&quot;,&quot;js&quot;:&quot;var myData = [&apos;Jan&apos;, &apos;Feb&apos;, &apos;Mar&apos;, &apos;Apr&apos;, &apos;May&apos;, &apos;Jun&apos;, &apos;Jul&apos;, &apos;Aug&apos;, &apos;Sep&apos;, &apos;Oct&apos;, &apos;Nov&apos;, &apos;Dec&apos;]\n\nvar linearScale = d3.scaleLinear()\n\t.domain([0, 11])\n\t.range([0, 600]);\n\nvar ordinalScale = d3.scaleOrdinal()\n\t.domain(myData)\n\t.range([&apos;black&apos;, &apos;#ccc&apos;, &apos;#ccc&apos;]);\n\nd3.select(&apos;#wrapper&apos;)\n\t.selectAll(&apos;text&apos;)\n\t.data(myData)\n\t.join(&apos;text&apos;)\n\t.attr(&apos;x&apos;, function(d, i) {\n\t\treturn linearScale(i);\n\t})\n\t.text(function(d) {\n\t\treturn d;\n\t})\n\t.style(&apos;fill&apos;, function(d) {\n\t\treturn ordinalScale(d);\n\t});\n\n&quot;}" /><input type="submit" value="Edit in CodePen" /></form>
</div>

<div>
<!-- <div class="example-links tr f8 blue mt2 mb4"> -->
	<!-- <a class="f7 black-50" href="https://bl.ocks.org/d3indepth/fabe4d1adbf658c0b73c74d3ea36d465" target="_blank">View source</a> -->
	<!-- | <a href="https://gist.jsbin.com/d3indepth/fabe4d1adbf658c0b73c74d3ea36d465?html,output" target="_blank">Edit in JS Bin</a> -->
	<!-- | <a class="f7 black-50" href="https://gist.run/?id=fabe4d1adbf658c0b73c74d3ea36d465" target="_blank">Edit in GistRun</a> -->
<!-- </div> -->
</div>

<p>By default if a value that’s not in the domain is used as input, the scale will implicitly add the value to the domain:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">ordinalScale</span><span class="p">(</span><span class="dl">'</span><span class="s1">Monday</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">// returns 'black';</span></code></pre></figure>

<p>If this isn’t the desired behvaiour you can specify an output value for unknown values using <code class="language-plaintext highlighter-rouge">.unknown()</code>:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">ordinalScale</span><span class="p">.</span><span class="nx">unknown</span><span class="p">(</span><span class="dl">'</span><span class="s1">Not a month</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ordinalScale</span><span class="p">(</span><span class="dl">'</span><span class="s1">Tuesday</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// returns 'Not a month'</span></code></pre></figure>

<p>D3 can also provide preset colour schemes (from <a href="http://colorbrewer2.org/#type=sequential&amp;scheme=BuGn&amp;n=3">ColorBrewer</a>):</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">ordinalScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleOrdinal</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">(</span><span class="nx">myData</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">schemePaired</span><span class="p">);</span></code></pre></figure>

<!-- <iframe class="db center" src="/blocks/scales/ordinal-scheme/" marginwidth="0" marginheight="0" style="width: 100%; height: 80px;" scrolling="yes"></iframe> -->

<iframe class="db center" src="/examples-merged/scales/ordinal-scheme/" marginwidth="0" marginheight="0" style="width: 100%; height: 80px;" scrolling="yes"></iframe>

<div class="flex justify-end f6 mt1 mb4">
  <form action="https://codepen.io/pen/define" method="POST" target="_blank"><input type="hidden" name="data" value="{&quot;title&quot;:&quot;D3 in Depth&quot;,&quot;js_external&quot;:&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js&quot;,&quot;html&quot;:&quot;&lt;svg width=\&quot;800\&quot; height=\&quot;60\&quot;&gt;\n  &lt;g id=\&quot;wrapper\&quot; transform=\&quot;translate(100, 40)\&quot;&gt;\n  &lt;/g&gt;\n&lt;/svg&gt;\n&quot;,&quot;css&quot;:&quot;\nbody {\n  font-family: \&quot;Helvetica Neue\&quot;, Helvetica, sans-serif;\n  font-size: 14px;\n  color: #333;\n}\n&quot;,&quot;js&quot;:&quot;var myData = [&apos;Jan&apos;, &apos;Feb&apos;, &apos;Mar&apos;, &apos;Apr&apos;, &apos;May&apos;, &apos;Jun&apos;, &apos;Jul&apos;, &apos;Aug&apos;, &apos;Sep&apos;, &apos;Oct&apos;, &apos;Nov&apos;, &apos;Dec&apos;]\n\nvar linearScale = d3.scaleLinear()\n\t.domain([0, 11])\n\t.range([0, 600]);\n\nvar ordinalScale = d3.scaleOrdinal()\n\t.domain(myData)\n\t.range(d3.schemePaired);\n\nd3.select(&apos;#wrapper&apos;)\n\t.selectAll(&apos;text&apos;)\n\t.data(myData)\n\t.join(&apos;text&apos;)\n\t.attr(&apos;x&apos;, function(d, i) {\n\t\treturn linearScale(i);\n\t})\n\t.text(function(d) {\n\t\treturn d;\n\t})\n\t.style(&apos;fill&apos;, function(d) {\n\t\treturn ordinalScale(d);\n\t});\n\n&quot;}" /><input type="submit" value="Edit in CodePen" /></form>
</div>

<div>
<!-- <div class="example-links tr f8 blue mt2 mb4"> -->
	<!-- <a class="f7 black-50" href="https://bl.ocks.org/d3indepth/ab3336867f7469e0f4608b59b8aa125c" target="_blank">View source</a> -->
	<!-- | <a href="https://gist.jsbin.com/d3indepth/ab3336867f7469e0f4608b59b8aa125c?html,output" target="_blank">Edit in JS Bin</a> -->
	<!-- | <a class="f7 black-50" href="https://gist.run/?id=ab3336867f7469e0f4608b59b8aa125c" target="_blank">Edit in GistRun</a> -->
<!-- </div> -->
</div>

<h4 id="scaleband">scaleBand</h4>

<p>When creating bar charts <code class="language-plaintext highlighter-rouge">scaleBand</code> helps to determine the geometry of the bars, taking into account padding between each bar. The domain is specified as an array of values (one value for each band) and the range as the minimum and maximum extents of the bands (e.g. the total width of the bar chart).</p>

<p>In effect <code class="language-plaintext highlighter-rouge">scaleBand</code> will split the range into <em>n</em> bands (where <em>n</em> is the number of values in the domain array) and compute the positions and widths of the bands taking into account any specified padding.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">bandScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleBand</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="dl">'</span><span class="s1">Mon</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Tue</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Wed</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Thu</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Fri</span><span class="dl">'</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">]);</span>

<span class="nx">bandScale</span><span class="p">(</span><span class="dl">'</span><span class="s1">Mon</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// returns 0</span>
<span class="nx">bandScale</span><span class="p">(</span><span class="dl">'</span><span class="s1">Tue</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// returns 40</span>
<span class="nx">bandScale</span><span class="p">(</span><span class="dl">'</span><span class="s1">Fri</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// returns 160</span></code></pre></figure>

<p>The width of each band can be accessed using <code class="language-plaintext highlighter-rouge">.bandwidth()</code>:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">bandScale</span><span class="p">.</span><span class="nx">bandwidth</span><span class="p">();</span>  <span class="c1">// returns 40</span></code></pre></figure>

<p>Two types of padding may be configured:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">paddingInner</code> which specifies (as a percentage of the band width) the amount of padding between each band</li>
  <li><code class="language-plaintext highlighter-rouge">paddingOuter</code> which specifies (as a percentage of the band width) the amount of padding before the first band and after the last band</li>
</ul>

<p>Let’s add some inner padding to the example above:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">bandScale</span><span class="p">.</span><span class="nx">paddingInner</span><span class="p">(</span><span class="mf">0.05</span><span class="p">);</span>

<span class="nx">bandScale</span><span class="p">.</span><span class="nx">bandWidth</span><span class="p">();</span>  <span class="c1">// returns 38.38...</span>
<span class="nx">bandScale</span><span class="p">(</span><span class="dl">'</span><span class="s1">Mon</span><span class="dl">'</span><span class="p">);</span>       <span class="c1">// returns 0</span>
<span class="nx">bandScale</span><span class="p">(</span><span class="dl">'</span><span class="s1">Tue</span><span class="dl">'</span><span class="p">);</span>       <span class="c1">// returns 40.40...</span></code></pre></figure>

<p>Putting this all together we can create this bar chart:</p>

<!-- <iframe class="db center" src="/blocks/scales/band/" marginwidth="0" marginheight="0" style="width: 100%; height: 250px;" scrolling="yes"></iframe> -->

<iframe class="db center" src="/examples-merged/scales/band/" marginwidth="0" marginheight="0" style="width: 100%; height: 250px;" scrolling="yes"></iframe>

<div class="flex justify-end f6 mt1 mb4">
  <form action="https://codepen.io/pen/define" method="POST" target="_blank"><input type="hidden" name="data" value="{&quot;title&quot;:&quot;D3 in Depth&quot;,&quot;js_external&quot;:&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js&quot;,&quot;html&quot;:&quot;&lt;svg width=\&quot;700\&quot; height=\&quot;240\&quot;&gt;\n  &lt;g id=\&quot;wrapper\&quot; transform=\&quot;translate(40, 20)\&quot;&gt;\n  &lt;/g&gt;\n&lt;/svg&gt;\n&quot;,&quot;css&quot;:&quot;\nbody {\n  font-family: \&quot;Helvetica Neue\&quot;, Helvetica, sans-serif;\n  font-size: 14px;\n  color: #333;\n}\nrect {\n\tfill: orange;\n}\n&quot;,&quot;js&quot;:&quot;var myData = [\n\t{day : &apos;Mon&apos;, value: 10},\n\t{day : &apos;Tue&apos;, value: 40},\n\t{day : &apos;Wed&apos;, value: 30},\n\t{day : &apos;Thu&apos;, value: 60},\n\t{day : &apos;Fri&apos;, value: 30}\n];\n\nvar bandScale = d3.scaleBand()\n\t.domain([&apos;Mon&apos;, &apos;Tue&apos;, &apos;Wed&apos;, &apos;Thu&apos;, &apos;Fri&apos;])\n\t.range([0, 200])\n\t.paddingInner(0.05);\n\nd3.select(&apos;#wrapper&apos;)\n\t.selectAll(&apos;rect&apos;)\n\t.data(myData)\n\t.join(&apos;rect&apos;)\n\t.attr(&apos;y&apos;, function(d) {\n\t\treturn bandScale(d.day);\n\t})\n\t.attr(&apos;height&apos;, bandScale.bandwidth())\n\t.attr(&apos;width&apos;, function(d) {\n\t\treturn d.value;\n\t});\n\n&quot;}" /><input type="submit" value="Edit in CodePen" /></form>
</div>

<div>
<!-- <div class="example-links tr f8 blue mt2 mb4"> -->
	<!-- <a class="f7 black-50" href="https://bl.ocks.org/d3indepth/1aef77d17863e603ff4e84226db5b227" target="_blank">View source</a> -->
	<!-- | <a href="https://gist.jsbin.com/d3indepth/1aef77d17863e603ff4e84226db5b227?html,output" target="_blank">Edit in JS Bin</a> -->
	<!-- | <a class="f7 black-50" href="https://gist.run/?id=1aef77d17863e603ff4e84226db5b227" target="_blank">Edit in GistRun</a> -->
<!-- </div> -->
</div>

<h4 id="scalepoint">scalePoint</h4>

<p><code class="language-plaintext highlighter-rouge">scalePoint</code> creates scale functions that map from a discrete set of values to equally spaced points along the specified range:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">pointScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scalePoint</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="dl">'</span><span class="s1">Mon</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Tue</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Wed</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Thu</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Fri</span><span class="dl">'</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">500</span><span class="p">]);</span>

<span class="nx">pointScale</span><span class="p">(</span><span class="dl">'</span><span class="s1">Mon</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">// returns 0</span>
<span class="nx">pointScale</span><span class="p">(</span><span class="dl">'</span><span class="s1">Tue</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">// returns 125</span>
<span class="nx">pointScale</span><span class="p">(</span><span class="dl">'</span><span class="s1">Fri</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">// returns 500</span></code></pre></figure>

<!-- <iframe class="db center" src="/blocks/scales/point/" marginwidth="0" marginheight="0" style="width: 100%; height: 90px;" scrolling="yes"></iframe> -->

<iframe class="db center" src="/examples-merged/scales/point/" marginwidth="0" marginheight="0" style="width: 100%; height: 90px;" scrolling="yes"></iframe>

<div class="flex justify-end f6 mt1 mb4">
  <form action="https://codepen.io/pen/define" method="POST" target="_blank"><input type="hidden" name="data" value="{&quot;title&quot;:&quot;D3 in Depth&quot;,&quot;js_external&quot;:&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js&quot;,&quot;html&quot;:&quot;&lt;svg width=\&quot;700\&quot; height=\&quot;80\&quot;&gt;\n  &lt;g id=\&quot;wrapper\&quot; transform=\&quot;translate(40, 40)\&quot;&gt;\n  &lt;/g&gt;\n&lt;/svg&gt;\n&quot;,&quot;css&quot;:&quot;\nbody {\n  font-family: \&quot;Helvetica Neue\&quot;, Helvetica, sans-serif;\n  font-size: 14px;\n  color: #333;\n}\ncircle {\n\tfill: orange;\n}\n&quot;,&quot;js&quot;:&quot;var myData = [\n\t{day : &apos;Mon&apos;, value: 10},\n\t{day : &apos;Tue&apos;, value: 40},\n\t{day : &apos;Wed&apos;, value: 30},\n\t{day : &apos;Thu&apos;, value: 60},\n\t{day : &apos;Fri&apos;, value: 30}\n];\n\nvar pointScale = d3.scalePoint()\n\t.domain([&apos;Mon&apos;, &apos;Tue&apos;, &apos;Wed&apos;, &apos;Thu&apos;, &apos;Fri&apos;])\n\t.range([0, 600]);\n\nd3.select(&apos;#wrapper&apos;)\n\t.selectAll(&apos;circle&apos;)\n\t.data(myData)\n\t.join(&apos;circle&apos;)\n\t.attr(&apos;cx&apos;, function(d) {\n\t\treturn pointScale(d.day);\n\t})\n\t.attr(&apos;r&apos;, 4);\n\n&quot;}" /><input type="submit" value="Edit in CodePen" /></form>
</div>

<div>
<!-- <div class="example-links tr f8 blue mt2 mb4"> -->
	<!-- <a class="f7 black-50" href="https://bl.ocks.org/d3indepth/4ed842af47f23eeb5cf1755d4bb67073" target="_blank">View source</a> -->
	<!-- | <a href="https://gist.jsbin.com/d3indepth/4ed842af47f23eeb5cf1755d4bb67073?html,output" target="_blank">Edit in JS Bin</a> -->
	<!-- | <a class="f7 black-50" href="https://gist.run/?id=4ed842af47f23eeb5cf1755d4bb67073" target="_blank">Edit in GistRun</a> -->
<!-- </div> -->
</div>

<p>The distance between the points can be accessed using <code class="language-plaintext highlighter-rouge">.step()</code>:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">pointScale</span><span class="p">.</span><span class="nx">step</span><span class="p">();</span>  <span class="c1">// returns 125</span></code></pre></figure>

<p>Outside padding can be specified as the ratio of the padding to point spacing. For example, for the outside padding to be a quarter of the point spacing use a value of 0.25:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">pointScale</span><span class="p">.</span><span class="nx">padding</span><span class="p">(</span><span class="mf">0.25</span><span class="p">);</span>

<span class="nx">pointScale</span><span class="p">(</span><span class="dl">'</span><span class="s1">Mon</span><span class="dl">'</span><span class="p">);</span>  <span class="c1">// returns 27.77...</span>
<span class="nx">pointScale</span><span class="p">.</span><span class="nx">step</span><span class="p">();</span>  <span class="c1">// returns 111.11...</span></code></pre></figure>

<h4 id="further-reading">Further reading</h4>

<p><a href="https://github.com/d3/d3-scale-chromatic">ColorBrewer schemes for D3</a></p>

<p><a href="https://medium.com/@mbostock/introducing-d3-scale-61980c51545f#.lk2cs7x7k">Mike Bostock on d3-scale</a></p>


  </div>
</div>

        </section>
      </section>

      
      <section class="mt5">
  <div class="f6 fw4 tc black-50">MY BOOKS</div>

  <div class="flex flex-row justify-center">
    <div class="book pv3 ph4 w-90 mw5 flex flex-column center black-70">
  <a class="center link" href="https://www.createwithdata.com/d3-start-to-finish-book/"><img src="/img/d3-start-to-finish.png" class="shadow-5"></a>
  <p class="mb0"><i>"One of the best D3 books I've read. The contents are very clear, it is easy to follow and the concepts are very solid."</i></p>
  <p class="mt0 tr"><a href="https://jgf92.github.io/personal-page/">Javier García Fernández</a></p>
  <p>Learn how to make a custom data visualisation using D3.js.</p>
  <a href="https://www.createwithdata.com/d3-start-to-finish-book/" class="f5 no-underline black bg-animate hover-bg-black hover-white inline-flex items-center pa2 ba border-box">
    <span class="center">Find out more</span>
  </a>
</div>    

<div class="book pv3 ph4 w-90 mw5 flex flex-column center black-70">
  <a class="center link" href="https://leanpub.com/html-svg-css-js-for-data-visualisation"><img src="/img/fundamentals.jpg" class="shadow-5"></a>
  <p>Learn the fundamentals of HTML, SVG, CSS and JavaScript for building data visualisations on the web.</p>
  <a href="https://leanpub.com/html-svg-css-js-for-data-visualisation" class="f5 no-underline black bg-animate hover-bg-black hover-white inline-flex items-center pa2 ba border-box">
    <span class="center">Find out more</span>
  </a>
</div>

  </div>
</section>

      

      <footer class="mt4 bt b--black-10">
        <p class="tc f6 mv4">&copy; <a href="https://peterrcook.com" target="_blank">Peter Cook</a> 2022</p>
      </footer>
    </div>

    <script src="/js/anchor.min.js"></script>
    <script>
anchors.add('h2, h3, h4');
    </script>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57362118-2', 'auto');
  ga('send', 'pageview');

</script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js"></script>
  </body>
</html>
